<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo do Dinossauro</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #f2f2f2;
        }

        canvas {
            display: block;
            background-color: #EAEAEA;
        }

        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2em;
            color: red;
            font-weight: bold;
            display: none;
        }
    </style>
</head>
<body>
    <div class="game-over" id="gameOver">GAME OVER!</div>
    <canvas id="gameCanvas" width="800" height="300"></canvas>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const gameOver = document.getElementById("gameOver");

        let dinoX = 50;
        let dinoY = 250;
        let dinoWidth = 30;
        let dinoHeight = 30;
        let gravity = 0.6;
        let jumpStrength = -15;
        let dinoVelocity = 0;
        let isJumping = false;

        let obstacleWidth = 20;
        let obstacleHeight = 30;
        let obstacleX = canvas.width;
        let obstacleY = 250;
        let obstacleSpeed = 5;

        let isGameOver = false;

        // Função para desenhar o dinossauro
        function drawDino() {
            ctx.fillStyle = "green";
            ctx.fillRect(dinoX, dinoY, dinoWidth, dinoHeight);
        }

        // Função para desenhar o obstáculo
        function drawObstacle() {
            ctx.fillStyle = "brown";
            ctx.fillRect(obstacleX, obstacleY, obstacleWidth, obstacleHeight);
        }

        // Função para verificar colisão
        function checkCollision() {
            if (
                dinoX + dinoWidth > obstacleX &&
                dinoX < obstacleX + obstacleWidth &&
                dinoY + dinoHeight > obstacleY
            ) {
                isGameOver = true;
                gameOver.style.display = "block";
            }
        }

        // Função para atualizar o estado do jogo
        function update() {
            if (isGameOver) return;

            // Limpar o canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Atualizar dinossauro (gravidade)
            if (dinoY + dinoHeight < canvas.height) {
                dinoVelocity += gravity;
            } else {
                dinoVelocity = 0;
                dinoY = canvas.height - dinoHeight;
                isJumping = false;
            }

            dinoY += dinoVelocity;

            // Mover o obstáculo
            obstacleX -= obstacleSpeed;

            // Se o obstáculo sair da tela, criar um novo
            if (obstacleX < 0) {
                obstacleX = canvas.width;
            }

            // Desenhar elementos
            drawDino();
            drawObstacle();

            // Verificar colisão
            checkCollision();

            // Atualizar a animação
            requestAnimationFrame(update);
        }

        // Função para pular
        function jump() {
            if (!isJumping && !isGameOver) {
                isJumping = true;
                dinoVelocity = jumpStrength;
            }
        }

        // Detectar pressionamento de tecla (para pular)
        document.addEventListener("keydown", function(event) {
            if (event.code === "Space") {
                jump();
            }
        });

        // Funções para iniciar e pausar o jogo
        window.addEventListener("message", (event) => {
            const { action } = event.data;

            if (action === "start") {
                isGameOver = false;
                gameOver.style.display = "none";
                update();
            }

            if (action === "pause") {
                isGameOver = true;
                gameOver.style.display = "block";
            }
        });
    </script>
</body>
</html>
